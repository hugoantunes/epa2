<!DOCTYPE html>
<head>
	<meta charset="utf-8">
	<title>Simulação</title>
	<script src="/static/js/jquery1.6.1.js" type="text/javascript"></script>
	<link href="/static/css/base.css" rel="stylesheet" type="text/css">
    <script>
        $(document).ready(function(){
            $('#simular').click(function(){
                var num_pessoas = $('#num_pessoas').val();
                var MyWorkers = [];
                var objeto = []
                var i = 0;

                while(num_pessoas > 0){

                    MyWorkers[i] = new Worker('/static/js/passageiro.js');
                    objeto[i] = {nome:'Hugo-'+i+''}

                    MyWorkers[i].onmessage=function(event){
                        console.log(event.data.nome);
                        this.terminate()
                    }
                    MyWorkers[i].postMessage(objeto[i]);
                    i++;
                    num_pessoas--
                }//While
            });
        });//document.ready
    </script>
</head>

<body>
    <fieldset>
        <label >Numero de Pessoas </label>
        <input type="text" name='num_pessoas' id='num_pessoas'>    
    
    </fieldset>
    <input type="button" value="simular" id='simular'>
    
    {% for transporte in transportes %}
        <div id='{{transporte.nome}}'>{{transporte.nome}}</div>
    {%endfor%}  
</body>

</html>
