<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <title>Simulação</title>
    
    <script src="/static/js/jquery1.6.1.js" type="text/javascript"></script>
    <script src="/static/js/jquery-ui-1.8.14.custom/js/jquery-ui-1.8.14.custom.min.js" type="text/javascript"></script>
    <script src="/static/js/passageiro.js" type="text/javascript"></script>
    <script src="/static/js/geral.js" type="text/javascript"></script>

    <link href="/static/js/jquery-ui-1.8.14.custom/css/ui-lightness/jquery-ui-1.8.14.custom.css" rel="stylesheet" type="text/css">
    <link href="/static/css/base.css" rel="stylesheet" type="text/css">
    <link href="/static/css/mundo.css" rel="stylesheet" type="text/css">
    <link href="/static/css/grafico_barra.css" rel="stylesheet" type="text/css">
    
    <script>
        $(document).ready(function(){    
            {% for quadrante in quadrantes %}
                qtd_passageiros_desalocados_q{{quadrante.id}} = $('#passageiros_desalocados_q{{quadrante.id}}').val(); 
                qtd_passageiros_alocados_q{{quadrante.id}} = $('#passageiros_alocados_q{{quadrante.id}}').val(); 
                qtd_carros_disponiveis = $('#num_carros').val();
            {% endfor %}

            {% for transporte in transportes %}
                transporte_modelo_{{transporte.id}} = new Transporte()
                transporte_modelo_{{transporte.id}}.tipo = "{{ transporte.nome }}"
                transporte_modelo_{{transporte.id}}.tempo = {{ transporte.tempo_viagem }}
                transporte_modelo_{{transporte.id}}.capacidade_maxima = {{ transporte.capacidade_maxima }}
                transporte_modelo_{{transporte.id}}.capacidade_atual = {{ transporte.capacidade_atual }}
                transporte_modelo_{{transporte.id}}.capacidade_confortavel = {{ transporte.capacidade_confortavel }}
            {% endfor %} 

            $("#simular").click(function(){
                console.log('subimitou');
                $.ajax({
                    type:'POST',
                    data: $("#my_form").serialize(),
                    url: '/mundo/{{mundo.id}}/passageiro/transporte/quadrante/'+1+'/',
                    success: function(data) {
                        console.log(data);
                    }
                });
            });
          });//document.ready

    </script>
</head>

<body>
    <form name='teste' method='post' id="my_form">
    {% csrf_token %}
    <fieldset>
        <legend>Numeros Gerais do Mundo:</legend>
        (<label for="num_pessoas">Pessoas Mundo</label> + <label for="num_pessoas">Pessoas Evento</label> = <label for="num_pessoas">Total</label>)
        </br>
        <input type="text" name='num_pessoas' id='num_pessoas' value='{{ mundo.qtd_pessoas }}'> + 
        <input type="text" name='num_pessoas_evento' id='num_pessoas_evento' value='{{ mega_evento.qtd_pessoas_esperadas }}'> = 
        <input type="text" readonly='readonly' name='num_pessoas_total' id='num_pessoas_total'  value='{{ total_pessoas }}'>
        <br/><br/>
        <label for="num_transportes">Quantidade de Transportes:</label>
        <br/>        
        <input type="text" name='num_transportes' id='num_transportes' value='{{ mundo.qtd_transportes }}'>
        <input type="hidden" name='num_transportes_usados' id='num_transportes_usados'>
        <br/>
        <label for="num_carros">Quantidade de Carros:</label>
        <br/>        
        <input type="text" name='num_carros' id='num_carros' value='{{ mundo.qtd_carros }}'>
        <input type="hidden" name='num_carros_usados' id='num_carros_usados' >

        <br/><br/>
        <label for="permite_carros">Nesse mundo a pessoas possuem carro ?</label>
        <input type="checkbox" name='permite_carros' id='permite_carros_mundo'{%if mundo.permite_carros%}checked{%endif%} > 

        <input type="button" value="simular" id='simular'>
    </fieldset>
    
    {% include "transporte_passageiros.html" %}
    
    {% include "transporte_transportes.html" %}
    </form>

</body>

</html>
